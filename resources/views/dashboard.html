<x-app-layout>
    
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.js"></script>
    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 bg-white border-b border-gray-200">
                    <div id="app">
                        <input type="text" v-model="newItem">
                        <button @click.prevent="addItem">追加</button>
                        <input v-model="query">検索
                        <ul v-cloak>
                          <li v-for="(todo, index) in filteredList">
                            <input type="checkbox" v-model="todo.isDone">
                            <span :class="{done: todo.isDone}">{{todo.item}}</span>
                            <button @click="deleteItem(index)">削除</button>
                          </li>
                        </ul>
                      </div>

                      <script>
                        let app = new Vue({
                          el:'#app',
                          data(){
                            return {
                              newItem: '',
                              todos: [],
                              query: ''
                            }
                          },
                          methods: {
                            addItem() {
                              if(!this.newItem) return
                              const todo = {
                                item: this.newItem,
                                isDone: false
                              }
                              this.todos.push(todo)
                              this.newItem = ''
                            },
                            deleteItem(index){
                              this.todos.splice(index,1)
                            }
                          },
                          computed:{
                            filteredList() {
                              let that = this
                              return this.todos.filter((todo) => {
                                return todo.item.indexOf(that.query) !== -1 //配列の中のtodoオブジェクトをfilterする
                              })
                            }
                          }
                        })
                      </script>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
